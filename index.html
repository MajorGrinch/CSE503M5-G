<!DOCTYPE html>
<html>

<head>
    <title>KM Calendar</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="js/jquery-3.2.1.js"></script>
    <script src="js/calendar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="css/calendar.css">
</head>

<body>
    <div id="wrapper">
        <div id="calendar">
            <table class="table table-bordered" id="calendar_table">
                <thead>
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="calendar_op">
            <button class="btn btn-primary" id="pre_mon">Previous Month</button>
            <button class="btn btn-primary" id="nxt_mon">Next Month</button>
        </div>
    </div>
    <script type="text/javascript">
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth();
    var yyyy = today.getFullYear();
    var current_month = new Month(yyyy, mm);
    updateCalendar();

    $('#pre_mon').click(function() {
        current_month = current_month.prevMonth();
        console.log(current_month);
        updateCalendar();
    });

    $('#nxt_mon').click(function() {
        current_month = current_month.nextMonth();
        console.log(current_month);
        updateCalendar();
    });



    function updateCalendar() {
        var cal_tb = document.getElementById("calendar_table");
        var weeks = current_month.getWeeks();
        var weeks_num = weeks.length;
        if (weeks_num == 6) {
            var tr = document.createElement("tr");
            for (var i = 0; i < 7; i++) {
                var td = document.createElement("td");
                tr.appendChild(td);
            }
            cal_tb.appendChild(tr);
        }

        console.log(cal_tb.childNodes.length);

        if (weeks_num == 5 && cal_tb.childNodes.length == 6) {
            cal_tb.removeChild(cal_tb.lastChild);
        }
        for (var w in weeks) {
            var days = weeks[w].getDates();
            var rowIndex = parseInt(w) + 1;
            var row = cal_tb.rows[rowIndex];
            for (var d in days) {
                colIndex = parseInt(d);
                row.cells[colIndex].innerHTML = days[d].getDate();
            }
        }
        console.log("Month: " + (current_month.month + 1));
    }
    </script>
</body>

</html>